<?xml version="1.0" encoding="utf-8" ?>
<summary>
    <para>BN# is a utility library designed to simplify the creation of Battle.net client applications by 
    abstracting away the underlying connection protocols and allowing the user to worry about implementing 
    client functionality.  BN# can be as simple as you need, by dropping it into your project and creating 
    settings for it to use, or it can be incredibly flexible, allowing custom packet handling, parsing 
    priorities, and assigning priorities to event handlers.  It uses a sophisticated threading model
    under the hood to allow peak performance without forcing the user to handle that directly.</para>
    <para>BN# has a series of optimizations in place.  To prevent heap fragmentation, data buffers are
    preallocated at fixed sizes and are reused over the lifetime of the application, allowing these buffers to 
    not be garbage-collected until the the clients using them are closed.</para>
    <para>For more information about getting started with BN#, take a look at the 
    <a href="http://www.jinxbot.net/wiki/" target="_blank">JinxBot Wiki</a>, including the article
    <a href="http://www.jinxbot.net/wiki/index.php?title=How_to_develop_a_Battle.net_client_in_10_minutes" target="_blank">How to develop a Battle.net client in 10 minutes</a>.
    </para>
    <para>
        <b style="font-size: larger;">Release Notes - BN# Beta 1</b>
    </para>
    <para>
        <b>New Features</b>
    </para>
    <list type="bullet">
        <item>Most appropriate classes has have WCF attributes applied to them and can be serialized with a DataContractSerializer. </item>
        <item>Added the ability to request user profiles.</item>
        <item>Friends support was added in this release</item>
        <item>BN# exposes a new event called EventExceptionThrown. The purpose of this event is to allow a host application to know when a specific plugin or feature set is causing an error and handle it gracefully. JinxBot will handle this condition, for example, by allowing the user to unload plugins on-demand if they are causing many exceptions. </item>
        <item>Additional clan support was added; BN# now understands and supports events for clan functions such as formation, chieftan change, new formation searching, and disband. Corresponding new functions include BeginClanCandidateSearch, InviteUsersToNewClan, RespondToNewClanInvitation, DisbandClan, and DesignateClanChieftan. Corresponding new events include ClanCandidatesSearchCompleted, ClanFormationCompleted, ClanFormationInvitationReceived, ClanDisbandCompleted, ClanInvitationReceived, ClanInvitationResponseReceived, ClanRemovalResponse, LeftClan, and ClanChangeChieftanCompleted. </item>
        <item>
            A new interface is supported for the ordering of packet parsing priority. This would allow, for example, a moderation plugin to require that ChatEvent packets are processed first (to receive UserJoined events). To support this functionality, implement the IPacketPriorityProvider interface in the BNSharp.Plugins namespace, and call BattleNetClient.RegisterCustomPacketPriorities/UnregisterCustomPacketPriorities.
        </item>
        <item>A demonstration project of a JinxBot plugin for adding MCP (Realm Server) support to BN# is available in the repository. It obeys some JinxBot contracts, but extends BN# to include handling for realm servers. </item>
        <item>A new method was added to BattleNetClient called CreateAccount.  If the login process fails, you can attempt to create the account by calling CreateAccount; it will use the information provided in the Settings object (this information can be changed dynamically at run-time). CreateAccount will result in the AccountCreated or AccountCreationFailed events to be raised; if AccountCreated is raised, the client will automatically log in.</item>
        <item>The client no longer automatically disconnects because of an account login failure. (CD key or versioning failure still results in an automatic disconnect). </item>
        <item>To support the no auto-disconnect policy, a new method was added to BattleNetClient called ContinueLogin(). This method allows the user to change the Settings object to modify the username and password of the desired login and then begin logging in again. </item>
    </list>
    <para>
        <b>Breaking Changes</b>
    </para>
    <list type="bullet">
        <item>By default, BNSharp requires support for .NET 3.0 because it references System.Runtime.Serialization version 3.0.0.0. For details on compiling without support for WCF data contract serialization, see the article <a href="http://www.jinxbot.net/wiki/index.php?title=Compiling_BNSharp_for_.NET_2.0" target="_blank">Compiling BN# for .NET 2.0.</a></item>
        <item>IBattleNetSettings now requires a new property, PingType, which allows the connection to attempt to drive a 0ms, -1ms, or standard ping type. Old code will need to add this property to the IBattleNetSettings implementation class. </item>
        <item>Users now automatically have a Stats property that contains a reference to a class derived from UserStats. This change is breaking and will impact code written for an older CTP release. If using the latest code, this will be compatible with handling code from r15 or newer. </item>
        <item>The LoginFailed event is no longer prototyped as EventHandler but LoginFailedEventHandler. The LoginFailedEventArgs class contains contextual information about the reason for login failure. </item>
    </list>
    <para>
        <b>Non-Breaking Changes</b>
    </para>
    <list type="bullet">
        <item>BN# includes the attributes used for data contract serialization as internal, stub attributes that will enable cross-versioning compatbility. For more information, see the article on compiling for .NET 2.0. This also removes the #if !NET_2_0 conditionals wrapping the attribute declarations throughout the data code. </item>
        <item>BN# now guarantees events are fired in the correct order by creating additional threads and event queues. This should increase the reliability of the order of events when joining a channel, for example. (Previously, joining a channel could cause a user to be listed as joined before the ChannelJoined event fired due to a race condition, which could cause the user to be added to the user list and then removed). </item>
        <item>Events on a BattleNetClient now have dedicated threads for Normal- and Low-priority event handlers. High-priority events are still executed on the Parse() loop. All Normal-priority event handlers are executed before outstanding Low-priority event handlers are executed. </item>
        <item>Added a new Position property to the MBNCSUtil DataReader class.</item>
        <item>Modified the non-Lockdown version of CheckRevision to use approximately 25mb less of memory allocations and reallocations, saving 3-4 gen-0 garbage collections.  The Lockdown version of CheckRevision uses significantly less memory and will be updated in a future version of BN#.</item>
        <item>Began adding namespace documentation.</item>
    </list>
    <para>
        <b>Bug Fixes</b>
    </para>
    <list type="bullet">
        <item>Corrected a defect in which a Warcraft 3 statstring would be incorrectly parsed due to a server defect.</item>
        <item>Corrected the IBattleNetEvents interface and the EventSink interface to expose all events.</item>
        <item>Comments had been made that the Disconnected event did not always fire correctly.  I believe I have corrected this defect.  If you see it happen, please report it in the <a href="http://www.jinxbot.net/forum/" target="_blank">JinxBot Forums</a>.</item>
    </list>
</summary>